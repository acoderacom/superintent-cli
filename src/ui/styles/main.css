@import "tailwindcss";


/* Scan UI component templates for Tailwind class usage */
@source "../components/*.ts";

/* Dark mode: class-based toggle via .dark on <html> */
@custom-variant dark (&:where(.dark, .dark *));

/* Dark mode color scheme */
@theme {
  --color-dark-base: #090909;
  --color-dark-surface: #101011;
  --color-dark-hover: #1e1f22;
  --color-dark-border: #27282d;
}

/*
 * Safelist: dynamically-constructed classes in templates.
 * Templates build class names via template literals like `bg-${color}-50`
 * which Tailwind's static scanner can't detect.
 *
 * Colors used: gray, yellow, blue, green, red, orange, purple, slate, cyan, emerald, indigo, pink
 */
@source inline("bg-{gray,yellow,blue,green,red,orange,purple,slate,cyan,emerald,indigo,pink}-{50,100,500}");
@source inline("text-{gray,yellow,blue,green,red,orange,purple,slate,cyan,emerald,indigo,pink}-{500,600,700}");
@source inline("border-{gray,yellow,blue,green,red,orange,purple,slate,cyan,emerald,indigo,pink}-{200}");

/* Dark mode safelist for dynamically-constructed badge classes */
@source inline("dark:bg-{gray,yellow,blue,green,red,orange,purple,slate,cyan,emerald,indigo,pink}-900/{20,30}");
@source inline("dark:text-{gray,yellow,blue,green,red,orange,purple,slate,cyan,emerald,indigo,pink}-{300,400}");
@source inline("dark:border-{gray,yellow,blue,green,red,orange,purple,slate,cyan,emerald,indigo,pink}-{700}");

/* Drag & drop */
.drag-over { outline: 2px dashed var(--color-blue-500); background: var(--color-blue-50); }
.dark .drag-over { background: var(--color-blue-950); }
.dragging { opacity: 0.5; }

/* HTMX loading indicators */
.htmx-indicator { display: none; }
.htmx-request .htmx-indicator { display: inline-block; }
.htmx-request.htmx-indicator { display: inline-block; }

/* Sidebar navigation */
.nav-active { background: var(--color-gray-200); font-weight: 500; }
.dark .nav-active { background: var(--color-dark-hover); }
.score-bar { height: 4px; border-radius: 2px; }

/* Modal animations */
.modal-content { max-height: 85vh; min-height: 200px; }
#modal { opacity: 0; transition: opacity 150ms ease-out; }
#modal.show { opacity: 1; }
#modal-content { transform: scale(0.95); transition: transform 150ms ease-out; }
#modal.show #modal-content { transform: scale(1); }

/* Search modal */
#search-modal { opacity: 0; transition: opacity 150ms ease-out; }
#search-modal.show { opacity: 1; }
#search-modal-content { transform: scale(0.95) translateY(-10px); transition: transform 150ms ease-out; }
#search-modal.show #search-modal-content { transform: scale(1) translateY(0); }

/* Sidebar transitions */
#sidebar { transition: translate 300ms ease-in-out, transform 300ms ease-in-out; }
#sidebar-backdrop { transition: opacity 200ms ease-in-out; }

/* Markdown prose styles */
.markdown-content h1, .markdown-content h2, .markdown-content h3 { font-weight: 600; margin-top: 1em; margin-bottom: 0.5em; }
.markdown-content h1 { font-size: 1.25em; }
.markdown-content h2 { font-size: 1.1em; }
.markdown-content h3 { font-size: 1em; }
.markdown-content p { margin-bottom: 0.75em; }
.markdown-content ul, .markdown-content ol { margin-left: 1.5em; margin-bottom: 0.75em; }
.markdown-content ul { list-style-type: disc; }
.markdown-content ol { list-style-type: decimal; }
.markdown-content li { margin-bottom: 0.25em; }
.markdown-content code { background: var(--color-gray-200); padding: 0.125em 0.25em; border-radius: 0.25em; font-size: 0.9em; }
.dark .markdown-content { color: var(--color-gray-200); }
.dark .markdown-content h1, .dark .markdown-content h2, .dark .markdown-content h3 { color: var(--color-gray-100); }
.dark .markdown-content strong { color: var(--color-gray-100); }
.dark .markdown-content code { background: var(--color-gray-700); color: var(--color-gray-200); }
.markdown-content pre { background: var(--color-gray-800); color: var(--color-gray-100); padding: 0.75em; border-radius: 0.375em; overflow-x: auto; margin-bottom: 0.75em; }
.dark .markdown-content pre { background: var(--color-dark-base); }
.markdown-content pre code { background: none; padding: 0; color: inherit; }
.markdown-content strong { font-weight: 600; }
.markdown-content a { color: var(--color-blue-600); text-decoration: underline; }
.dark .markdown-content a { color: var(--color-blue-400); }
.markdown-content blockquote { border-left: 3px solid var(--color-gray-300); padding-left: 1em; color: var(--color-gray-500); margin-bottom: 0.75em; }
.dark .markdown-content blockquote { border-color: var(--color-gray-600); color: var(--color-gray-400); }
.markdown-content li:has(> input[type="checkbox"]) { list-style: none; display: flex; align-items: baseline; gap: 0.4em; margin-left: -1.5em; }
.markdown-content li > input[type="checkbox"] { margin: 0; pointer-events: none; }

/* Dark mode shadows: lighten so they're visible against near-black backgrounds */
.dark {
  --tw-shadow-color: rgba(255, 255, 255, 0.12);
}

/* Restore Tailwind v3 defaults that v4 preflight removed */
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
    --tw-ring-shadow: 0 0 #0000;
    --tw-inset-ring-shadow: 0 0 #0000;
    --tw-ring-offset-shadow: 0 0 #0000;
    --tw-inset-shadow: 0 0 #0000;
  }
  .dark *, .dark ::after, .dark ::before, .dark ::backdrop, .dark ::file-selector-button {
    border-color: var(--color-dark-border);
  }
  input, select, textarea {
    background-color: var(--color-white);
  }
  .dark input, .dark select, .dark textarea {
    background-color: var(--color-dark-surface);
  }
}
